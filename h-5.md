# h-5 CSI Kerava

Kone millä tein harjoituksen:

AMD Ryzen 2600X Six-Core Processor 3.6 ghz  

16gb RAM  

Windows 10 Pro 64-bit käyttöjärjestelmä  

Oracle VM VirtualBox Manager  

##

Tehtävä löytyy sivulta: https://terokarvinen.com/2023/configuration-management-2023-autumn/

## x)  Lue ja tiivistä  

https://terokarvinen.com/2018/04/03/apache-user-homepages-automatically-salt-package-file-service-example/  

Artikkelissa kerrotaan miten Apachella saadaan automaattisesti käyttäjän kotisivut Salt Package-File-service käyttämällä.  

- Kaikki kannattaa eka tehdä manuaalisesti käsin
- Apachen configuration tiedostot löytyy polusta /etc/apache2/
- `$ find -printf "%T+ %p\n"|sort` saadaan selville muutosten aikajana

- Paras tapa käyttäen configuration tiedostoja:

```$ cat /srv/salt/apache/init.sls  
apache2:  
 pkg.installed  
/var/www/html/index.html:  
 file.managed:  
   - source: salt://apache/default-index.html
/etc/apache2/mods-enabled/userdir.conf:
 file.symlink:
   - target: ../mods-available/userdir.conf
/etc/apache2/mods-enabled/userdir.load:
 file.symlink:
   - target: ../mods-available/userdir.load
apache2service:
 service.running:
   - name: apache2
   - watch:
     - file: /etc/apache2/mods-enabled/userdir.conf
     - file: /etc/apache2/mods-enabled/userdir.load 
```
- Kotisivut löytyy `$ cat /srv/salt/apache/default-index.html`
- Tila käyttöön masterilla `$ sudo salt '*' state.apply apache`

## a)  CSI Kerava. Näytä 'find' avulla viimeisimmäksi muokatut tiedostot /etc/-hakemistosta ja kotihakemistostasi. Selitä kaikki käyttämäsi parametrit ja format string 'man find' avulla.  

Teron sivujen tehtävien vinkeissä on komento `$ find -printf '%T+ %p\n'`, kokeilin sitä ensimmäisenä ja se tosiaan tulostaa kaikki viimeiset muokatut tiedostot.  

Man find sivuilta selvisi miten voin etsiä tietystä hakemistosta ja vielä laittaa putkittaa ja laittaa sort komennolla ne aikajärjestykseen.  

Viimeisimmät muokatut tiedostot /etc hakemistosta:  

` $ find /etc -printf '%T+ %p\n' |sort -n `  

Sort -n laittaa kronologiseen järjestykseen haut niin, että viimeisimmät näkyy ekana. 

##  

![image](https://github.com/aarott/palvelinten_hallinta/assets/78908566/7f1bd631-2453-4e42-9894-269983641c25)  

## 

Sama juttu jos etsitään /home hakemistosta muutetaan vaan hakemiston polkua:  

`` $ find /home -printf '%T+ %p\n' |sort -n `  

##  

![image](https://github.com/aarott/palvelinten_hallinta/assets/78908566/d09f1749-741a-420a-8080-de8146c176c9)  

##






